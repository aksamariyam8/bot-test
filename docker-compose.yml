version: '3.8'

services:
  bot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: bot-test
    env_file:
      - .env
    environment:
      # BOT_CONFIG can be set in .env file or as environment variable
      - BOT_CONFIG=${BOT_CONFIG:-}
    volumes:
      # Mount recordings directory to local test-recordings folder
      - ./test-recordings:/home/bot-test
    cap_add:
      - SYS_ADMIN
    shm_size: 2g
    # Use bridge network instead of host mode for better compatibility
    networks:
      - bot-network

networks:
  bot-network:
    driver: bridge
