version: '3.8'

volumes:
  bot-recordings:
    driver: local

services:
  bot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: bot-test
    env_file:
      - .env
    environment:
      # BOT_CONFIG can be set in .env file or as environment variable
      - BOT_CONFIG=${BOT_CONFIG:-}
    volumes:
      # Use Docker volume for recordings
      - bot-recordings:/app/recordings
    cap_add:
      - SYS_ADMIN
    shm_size: 2g
    # Use bridge network instead of host mode for better compatibility
    networks:
      - bot-network

networks:
  bot-network:
    driver: bridge
